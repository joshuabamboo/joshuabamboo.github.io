
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8">
	<title>Ride or Pry</title>

	<meta name="author" content="Josh Owens">
	
	<meta name="description" content="31 Aug 2017 You're Whiteboarding All Wrong I’ve done a number of white boarding challenges, and they all terrify me. Something about them.
The best &hellip;">

	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href="/atom.xml" rel="alternate" title="Ride or Pry" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/.min.css" />
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body class="home-template">
  <header id="site-head">
  <div class="vertical">
    <div id="site-head-content" class="inner">
      <h1 class="blog-title"><a class="no-rollover" href="/">Ride or Pry</a></h1>
      <h2 class="blog-description">Joshua Owens</h2>
    </div>
  </div>
</header>
  <main class="content" role="main">
    



  
    <article class="post">
      
	
		
	
	<header class="post-header">
		<span class="post-meta">31 Aug 2017</span>
		<h2 class="post-title">
			
			<a href="/blog/2017/08/31/youre-whiteboarding-all-wrong/">
			
				You&#8217;re Whiteboarding All Wrong</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>I’ve done a number of white boarding challenges, and they all terrify me. Something about them.
The best way I can describe it is that feeling you get when you’re taking a test you didn&rsquo;t study for. You’re given a problem - you&rsquo;ve never seen it before - but you <em>need</em> to have the answer.
It&rsquo;s a miserable feeling. Some people shut down and leave the page blank. Some ramble in the hopes that they might stumble upon the answer. I’ve been guilty of both. The good <a href="news:">news:</a> This is not a test.</p>

<p><img src="https://media.giphy.com/media/10gtBUqL2PNHBS/giphy.gif" alt="" /></p>

<p>YOU AIN&rsquo;T GOT THE ANSWERS, SWAY! Luckily, you don’t need them.</p>

<h4>White boarding is a discussion.</h4>

<p>With a test, you&rsquo;re given a problem. There are two possible outcomes: pass or fail. If you know the answer you pass; if not, you fail.</p>

<p>With a discussion, you are given a problem. You don’t need to know the solution. In fact, if you did it would ruin the whole thing. There would be nothing to discuss.
Your job is to do your best to make the problem approachable. They want to walk through the process with you. Watch your brain work. It’s okay to be Sway.</p>

<p>With a test, the process might look something like this:</p>

<h5>Problem -> Solution -> Harder Problem -> Revised Solution -> Add complexity -> Next solution…</h5>

<p>With a discussion, it&rsquo;s a very different story.</p>

<h5>Problem -> Questions -> Clarify problem -> Restate the problem -> Discuss scoped problem -> Exploration…</h5>

<p>Notice, the major difference between these two: The discussion has no solution in sight. That does not mean that you will not arrive at a solution. It&rsquo;s just that there is much to consider before a solution begins to reveal itself. Let&rsquo;s take a look at what these differing approaches may look like in practice.</p>

<h2>Examples</h2>

<p>Here is a recent example of a whiteboard challenge. Let’s take a look at how it went, and then compare how it might’ve gone using this more structured discussion approach.</p>

<p>The Problem: Determine whether the following code will compile/How you would determine if there was a missing curly bracket: <code>var greeting = {</code></p>

<h3>Test Approach</h3>

<p>I asked a few clarifying questions. Could I assume it was a a string? If so, I could split a string and then go through an array to find the opening and closing brackets. When in the test mindset, the pressure of producing some result leaves you leaping toward a solution.</p>

<p>Boom. Naive solution. Split the string. Iterate through the collection. If you find the an open bracket, continue iterating and look for its partner.</p>

<p>We discussed. In an attempt to clarify, I jotted down a basic implementation.</p>

<p>He added complexity. What happens if we have nested brackets: <code>{ greetingCount: [[1],2]}</code></p>

<p>I tried reworking the initial solution for the new case. When that hit a dead end, I attempted another path: regex. After all, regex is made for pattern matching. This led to us going down rabbit holes because I committed early on to this solution. It was hard to switch gears.</p>

<p><img src="https://media.giphy.com/media/26uflOGFZAKurnp7O/giphy.gif" alt="" /></p>

<h3>Discussion Approach</h3>

<p>Now, let&rsquo;s compare that experience with the back and forth of the discussion approach. Again, notice how there is no solution in Problem -> Questions -> Clarify problem -> Restate the problem -> Discuss scoped problem -> Exploration.</p>

<p><strong>Question</strong></p>

<p>Can we assume it&rsquo;s a string? Are these the only two characters we want to check for? Should it be a method? If so, should it return a boolean value?</p>

<p><strong>Clarify</strong></p>

<p>These starter questions give you a chance to get more info about the problem. In my example, the interviewer gave me a key detail that I missed. “You don’t need to write code.” I should’ve used this opportunity to ask even more questions. If no code, should we explore different algorithms? Data structures? Pseudocode? This would give me the chance to scope the problem even further.</p>

<p><strong>Restate</strong></p>

<p>Depending on the conversation, the new restated problem might be something like: <em>What data structure could you use to find connected components in a string?</em></p>

<p><strong>Discuss</strong></p>

<p>Notice we have the same problem, but a whole new direction for the conversation. Now we can talk about data structures.</p>

<ol>
<li><p>Array - This is where I could explore the initial string solution from above. It could be useful because we have the indexed position of the character.</p></li>
<li><p>Hash - A hash could potentially be used to keep track of a character’s count and position. It seems complex. Probably too complex, but we could always revisit.</p></li>
<li><p>Linked list - Probably not ideal for this one.</p></li>
<li><p>Stack - Could we add the characters to a stack and keep track of each one using LIFO?</p></li>
<li><p>Queue - Or maybe we could use FIFO to queue up the characters?</p></li>
</ol>


<p><strong>Explore</strong></p>

<p>Again, this continues the discussion. “A stack seems to make the most sense, let&rsquo;s explore it&hellip;”</p>

<p>Rather than a teacher/student dynamic, this approach creates a sort of partnership between you and the interviewer where you are working together. This is, after all, what you will be doing with this person if you get the job.</p>

<p><img src="https://media.giphy.com/media/Jylb9PZHvJZSg/giphy.gif" alt="" /></p>

<h2>Final Thoughts</h2>

<p>Hindsight’s 20/20, so the example is admittedly a bit contrived. But the important takeaway for me is the back and forth with the interviewer. Notice there is no code yet (just like the interviewer suggested). The discussion allows for you to better understand the problem. It allows the interviewer to learn a little bit about your thought process and what you know. In fact, it&rsquo;s a great way to show off your breadth in real time.</p>

<p>Treat it like you’re making a web app. You don’t go immediately from idea to production. There are a ton of steps in between, and most don’t involve code. You have domain model sketches, wireframes, Trello boards with user stories, tests, bugs, conversations with friends, colleagues and rubber ducks. The whiteboard is a microcosm of this. Creating a back and forth with your interviewer is just a way of showcasing some of those skills.</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">09 May 2016</span>
		<h2 class="post-title">
			
			<a href="/blog/2016/05/09/post-mortem-whiteboard-challenge/">
			
				Postmortem: Whiteboard Challenge</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<h5>What I learned and how I would face the problem today</h5>

<p>During an interview with a large tech company, I was asked to solve the following problem:</p>

<p>Imagine you have a 2X2 grid and three items (for example, an apple, a bottle, and a cd &ndash; referred to below as &ldquo;a&rdquo;, &ldquo;b&rdquo;, and &ldquo;c&rdquo;, respectively). If you place these items in a specific pattern on the grid, then you will unlock a prize (money, let&rsquo;s say).</p>

<p>The items must be placed in this exact pattern, and any other permutation will result in no prize.</p>

<p><img src="http://joshuabamboo.github.io/images/whiteboard4.JPG" width="600" alt="" /></p>

<h2>Solution 1</h2>

<h3>The naive solution</h3>

<p>My initial approach was to index each individual square in order to know the position of each item.</p>

<p><img src="http://joshuabamboo.github.io/images/whiteboard1.JPG" width="600" alt="" /></p>

<p>Then use a hash to store the indexed location as the key and the item as the value:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">solution</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="o">=&gt;</span><span class="kp">nil</span> <span class="mi">4</span><span class="o">=&gt;</span><span class="s2">&quot;c&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>After storing the solution, we could then store that as the key of another hash where the value is the prize:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">solutions</span> <span class="o">=</span> <span class="p">{</span><span class="n">solution</span><span class="o">=&gt;</span><span class="s2">&quot;money&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This way we could check the locations of items on the board against the keys in our <code>solutions</code> hash. If the key exists, then it would return the value. If not, it would return <code>nil</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">solutions</span><span class="o">[</span><span class="p">{</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="o">=&gt;</span><span class="kp">nil</span> <span class="mi">4</span><span class="o">=&gt;</span><span class="s2">&quot;c&quot;</span><span class="p">}</span><span class="o">]</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;money&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">solutions</span><span class="o">[</span><span class="p">{</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="o">=&gt;</span><span class="s2">&quot;a&quot;</span> <span class="mi">4</span><span class="o">=&gt;</span><span class="s2">&quot;c&quot;</span><span class="p">}</span><span class="o">]</span>
</span><span class='line'>  <span class="c1">#=&gt; nil</span>
</span><span class='line'>
</span><span class='line'><span class="n">solutions</span><span class="o">[</span><span class="p">{</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="o">=&gt;</span><span class="kp">nil</span> <span class="mi">4</span><span class="o">=&gt;</span><span class="s2">&quot;b&quot;</span><span class="p">}</span><span class="o">]</span>
</span><span class='line'>  <span class="c1">#=&gt; nil</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What did I learn</h3>

<p>This approach only works for a fixed grid size. As soon as the grid size changes, this solution does not work.</p>

<h3>What should change</h3>

<p>Grid size must be accounted for in some way, so that is what must be tackled in the next solution.</p>

<p>-</p>

<h2>Solution 2</h2>

<h3>Accounting for variable grid sizes</h3>

<p>There are actually two problems when the grid size increases:</p>

<ol>
<li>Scale - Now there is more than one potential set of locations for the pattern to fit on the board.</li>
<li>Absolute locations - The 2X2 solutions hash now has the wrong indexed locations.</li>
</ol>


<p><img src="http://joshuabamboo.github.io/images/whiteboard5.JPG" width="600" alt="" /></p>

<p>Addressing problem 1: We could continue to build out the hash from the first solution, but that would quickly become complex and would not scale well. The pattern was unique when the grid was just 2X2; however, with a 3X3 grid, the pattern would match in 4 locations:</p>

<p><img src="http://joshuabamboo.github.io/images/whiteboard2.JPG" width="600" alt="" /></p>

<p>The bigger problem here is problem 2: relying on the absolute location.</p>

<p>I was running into a wall trying to approach these two problems at once, so I eventually asked if I could approach the problem as if I were setting up a relational database for a web app where the grid was a form being submitted by the user. The interviewer obliged. The following table was the result of that exchange:</p>

<h3>Winning patterns</h3>

<table>
<thead>
<tr>
<th> id   </th>
<th style="text-align:left;"> prize </th>
<th style="text-align:right;"> dimensions </th>
<th style="text-align:right;"> 1 </th>
<th style="text-align:right;"> 2 </th>
<th style="text-align:right;"> 3 </th>
<th style="text-align:right;"> 4 </th>
<th style="text-align:right;"> 5 </th>
<th style="text-align:right;"> 6 </th>
<th style="text-align:right;"> &hellip; </th>
</tr>
</thead>
<tbody>
<tr>
<td> 1 </td>
<td style="text-align:left;"> &ldquo;money&rdquo; </td>
<td style="text-align:right;"> &ldquo;2x2&rdquo; </td>
<td style="text-align:right;"> &ldquo;a&rdquo; </td>
<td style="text-align:right;"> &ldquo;b&rdquo; </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> &ldquo;c&rdquo; </td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td> 2 </td>
<td style="text-align:left;"> &ldquo;money&rdquo; </td>
<td style="text-align:right;"> &ldquo;3x3&rdquo; </td>
<td style="text-align:right;"> &ldquo;a&rdquo; </td>
<td style="text-align:right;"> &ldquo;b&rdquo; </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> &ldquo;c&rdquo; </td>
<td></td>
<td></td>
</tr>
<tr>
<td> 3 </td>
<td style="text-align:left;"> &ldquo;money&rdquo; </td>
<td style="text-align:right;"> &ldquo;4x4&rdquo; </td>
<td style="text-align:right;"> &ldquo;a&rdquo; </td>
<td style="text-align:right;"> &ldquo;b&rdquo; </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> nil </td>
<td style="text-align:right;"> &ldquo;c&rdquo; </td>
<td></td>
</tr>
</tbody>
</table>


<p>You&rsquo;ll notice that a pattern starts to emerge. If the user submits a pattern of &ldquo;a b nil nil c&rdquo; on a 3x3 grid, we can check the 3x3 winning patterns to see if it matches a pattern from our <code>winning patterns</code> table.</p>

<p>This is obviously a bad way to design a table. Each block in the grid is represented by a column. As a consequence, as the grid grows, the table would need to grow horizontally. Nevertheless, it helped me wrap my head around the problem. A pattern begins to emerge. This pattern can be represented on three different dimensioned grids. As long as we know the dimensions of the board, we can check for the pattern by counting the number of empty spaces (<code>nils</code>) between the items.</p>

<p>At this point we ran out of time in the interview.</p>

<h3>What did I learn</h3>

<ol>
<li>As the grid grows, it is important to consider whether the solution will scale.</li>
<li>The absolute position of the items is less important than their relative position to one another. Relative position should be the focus.</li>
<li>Thinking about the problem in a new way can be clarifying. Approaching it from the perspective of creating a web app added a layer of familiarity that allowed me to be more comfortable and confident in problem-solving in uncharted territory.</li>
</ol>


<h3>What should change</h3>

<p>Obviously the idea needs some finessing. A solution started to emerge, but I left the interview with the algorithm on my mind. A pattern was identified, but scaling was still an issue.</p>

<hr />

<h1>Post interview</h1>

<h3>Clarify the problem</h3>

<p>One of the big takeaways from this interview and all technical interviews is the importance of asking clarifying questions. Take the grid for example:</p>

<ul>
<li>Are we responsible for constructing the grid?

<ul>
<li>If not, how is the grid represented?

<ul>
<li>Is it a form?</li>
<li>Is it an array of arrays?</li>
<li>Is it just represented by a string?</li>
</ul>
</li>
</ul>
</li>
<li>Is the grid being passed in somehow (EG HTTP request) or are we writing a script?</li>
</ul>


<p>This is an important start. It helps you become familiar with the domain. And more importantly, asking questions will help you scope the problem.</p>

<h3>Breaking down the problem</h3>

<p>We all know how important it is as an engineer to take one big problem and break it into several smaller problems. As I approach the problem today, I would actually break it down into at least three problems:</p>

<ol>
<li>Determining the grid layout</li>
<li>Isolating the user&rsquo;s pattern</li>
<li>Matching the user&rsquo;s pattern with the winning patterns</li>
</ol>


<h3>Problem 1: Determing the grid layout</h3>

<p>I don&rsquo;t have the luxury of asking clarifying questions at this phase, so I had to make some assumptions. Since I was allowed in the interview to think about it as a form being submitted, I will stick with that. I am assuming that I, the programmer, am responsible for constructing the grid. I am choosing to have the grid designed as a form where each input is a different square in the grid. When the form is submitted, we could then access the value and name of each input via the params being sent back to our server.</p>

<p>With this setup in mind, I began thinking about the best way to design a grid.
I didn&rsquo;t like the idea of needing to keep track of the size of the grid, which seemed to be the source of our scaling problem. If we made the grid size irrelevant, scaling was no longer an issue.</p>

<h5>Coordinates!</h5>

<p>Switching from integer addresses to coordinates was a real breakthrough. This went from assigning arbitrary integers to a location to communicating valuable location information.</p>

<p><img src="http://joshuabamboo.github.io/images/whiteboard3.JPG" width="600" alt="" /></p>

<h3>Problem 2: Isolating the user&rsquo;s pattern</h3>

<p>If we have the coordinates of the items&#8217; locations, then we know the boundaries of that location. Consider the following grid:
The other idea was this: if we have the coordinates of the items&#8217; locations, then we know the boundaries of that location. Consider the following grid:</p>

<p><img src="http://joshuabamboo.github.io/images/whiteboard6.JPG" width="600" alt="" /></p>

<h5>&ldquo;A grid within the grid&rdquo; Solution</h5>

<p>We can now draw a boundary box around the max and min <code>x</code> and <code>y</code> axis points, creating a more explicit box within the grid. Everything outside of that smaller box is empty space, and not relevant to solving the problem.</p>

<p>programmatically, we could represent this by (a) isolating the dimensions then (b) isolating the pattern within those dimensions.</p>

<h5>Isolating the dimensions</h5>

<p>When we receive params, it will contain information for every form input. For example, a 3x3 grid might return something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">params</span><span class="o">[</span><span class="ss">:grid</span><span class="o">]</span> <span class="c1">#=&gt; {&quot;0-0&quot;=&gt;&quot;a&quot;, &quot;1-0&quot;=&gt;&quot;b&quot;, &quot;2-0&quot;=&gt;&quot;&quot;,</span>
</span><span class='line'>                   <span class="s2">&quot;0-1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;1-1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;2-1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>                   <span class="s2">&quot;0-2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;1-2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;2-2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>                  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The task now is to pull out the key/value pairs that contain non-empty strings as values.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">coordinates</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'><span class="n">params</span><span class="o">[</span><span class="ss">:grid</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">location</span><span class="p">,</span> <span class="n">item</span><span class="o">|</span> <span class="n">coordinates</span><span class="o">&lt;&lt;</span><span class="n">location</span> <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, we have a <code>coordinates</code> array that returns <code>["0-0", "1-0", "1-1"]</code>. We have to separate the strings on the hyphen.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">separated_coords</span><span class="o">=[]</span>
</span><span class='line'><span class="n">coordinates</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">cord</span><span class="o">|</span> <span class="n">separated_coords</span><span class="o">&lt;&lt;</span><span class="n">cord</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)}</span>
</span><span class='line'>
</span><span class='line'><span class="n">separated_coords</span> <span class="c1">#=&gt; [[&quot;0&quot;, &quot;0&quot;], [&quot;1&quot;, &quot;0&quot;], [&quot;1&quot;, &quot;1&quot;]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, we want to iterate through each array and store the x and y values in separate arrays.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">x</span><span class="o">=[]</span>
</span><span class='line'><span class="n">y</span><span class="o">=[]</span>
</span><span class='line'>
</span><span class='line'><span class="n">separated_coords</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">cord</span><span class="o">|</span> <span class="n">x</span><span class="o">&lt;&lt;</span><span class="n">cord</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">;</span> <span class="n">y</span><span class="o">&lt;&lt;</span><span class="n">cord</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">x</span> <span class="c1">#=&gt; [&quot;0&quot;, &quot;1&quot;, &quot;1&quot;]  </span>
</span><span class='line'><span class="n">y</span> <span class="c1">#=&gt; [&quot;0&quot;, &quot;0&quot;, &quot;1&quot;]  </span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we can easily do the calculations to find the smallest possible grid that contains this patterns.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">max_x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'><span class="n">min_x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'>
</span><span class='line'><span class="n">min_y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'><span class="n">max_y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'>
</span><span class='line'><span class="n">smallest_grid_dimensions</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="p">(</span><span class="n">max_x</span> <span class="o">-</span> <span class="n">min_x</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">*</span><span class="si">#{</span><span class="p">(</span><span class="n">max_y</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;2*2&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Isolating the pattern</h5>

<p>We know from our first operation while calculating the dimensions that three items added to the grid. We can calculate this by call <code>#size</code> on <code>separated_coords</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">separated_coords</span><span class="o">.</span><span class="n">size</span> <span class="c1">#=&gt; 3</span>
</span></code></pre></td></tr></table></div></figure>


<p>We also know that there are four elements that make up this pattern, given that we now have the dimensions.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">eval</span><span class="p">(</span><span class="n">smallest_grid_dimensions</span><span class="p">)</span> <span class="c1">#=&gt; 4</span>
</span></code></pre></td></tr></table></div></figure>


<p>This tells us that there is just one <code>nil</code> missing from our pattern.</p>

<p>Meanwhile, we can get a list of all the items by iterating through params.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">items</span><span class="o">=[]</span>
</span><span class='line'><span class="n">params</span><span class="o">[</span><span class="ss">:grid</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">location</span><span class="p">,</span> <span class="n">item</span><span class="o">|</span> <span class="n">items</span><span class="o">&lt;&lt;</span><span class="n">item</span><span class="p">}</span>
</span><span class='line'><span class="n">items</span> <span class="c1">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;&quot;, &quot;&quot;, &quot;c&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The starting point of our pattern will be at the minimum values for x (<code>min_x</code>) and y (<code>min_y</code>).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">starting_item</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:grid</span><span class="o">][</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">min_x</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">min_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Likewise, the same can be done with the max values to get the ending_item</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">ending_item</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:grid</span><span class="o">][</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">max_x</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">max_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span>
</span></code></pre></td></tr></table></div></figure>


<p>This leaves us with an array of all the user&rsquo;s items.</p>

<p><code>user_pattern #=&gt; ["a", "b", nil, "c"]</code></p>

<p>Now that we have the pattern for the smallest grid dimensions, we can check it against a list of winning patterns more efficiently.</p>

<h3>Problem 3: Matching the user&rsquo;s pattern with the winning patterns</h3>

<p>During the interview, I kept coming back to the notion that this problem was solvable with a tree. We even discussed the possibility of using regular expressions. Now with the smaller box boundary, we can make use of either. In fact, we can revisit the initial naive solution. Modified slightly, this set up now works with our new solution:</p>

<h5>Hash</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">pattern</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;2*2&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">]</span>
</span><span class='line'><span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span><span class="n">pattern</span> <span class="o">=&gt;</span> <span class="s2">&quot;money&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now that we have the pattern stored as a key in our <code>patterns</code> hash, we can simply pass in an array of the items from our &ldquo;grid within a grid.&rdquo; If the array of items matches one of the patterns stored in our hash, it will return the prize that is stored as the value. If not, it will return <code>nil</code>.</p>

<p><img src="http://joshuabamboo.github.io/images/patterns-hash.png" alt="" />
<img src="http://joshuabamboo.github.io/images/patterns-hash-nil.png" alt="" /></p>

<h5>DB</h5>

<p>If we stuck to the original database concept, the <code>patterns</code> table would simply be four columns, and would no longer grow horizontally depending on the size of the grid.</p>

<table>
<thead>
<tr>
<th> id   </th>
<th> prize   </th>
<th> pattern              </th>
<th> dimension </th>
</tr>
</thead>
<tbody>
<tr>
<td> 1    </td>
<td> &ldquo;money&rdquo; </td>
<td> [&ldquo;a&rdquo;, &ldquo;b&rdquo;, nil, &ldquo;c&rdquo;] </td>
<td> &ldquo;2*2&rdquo;     </td>
</tr>
</tbody>
</table>


<p>With the DB solution, you could structure the winning pattern as an array or string as a column in the <code>winning_patterns</code> table (I will use the array example since that&rsquo;s what I used above).</p>

<p>At this point, we just need to query the database. In Rails, the ActiveRecord query would look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">user_pattern</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">]</span>
</span><span class='line'><span class="n">size</span> <span class="o">=</span> <span class="s2">&quot;2x2&quot;</span>
</span><span class='line'><span class="n">win</span> <span class="o">=</span> <span class="no">WinningPattern</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="ss">pattern</span><span class="p">:</span> <span class="n">user_pattern</span><span class="p">,</span> <span class="ss">dimension</span><span class="p">:</span> <span class="n">size</span><span class="p">)</span>
</span><span class='line'><span class="n">win</span><span class="o">.</span><span class="n">prize</span> <span class="k">if</span> <span class="n">win</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the query returns an object, then the return value of <code>win.prize</code> will be the corresponding prize, in this case <code>"money"</code>. If no match is found in the db <code>WinningPattern.find_by(pattern: user_pattern)</code> will return <code>nil</code>.</p>

<h2>What Did I Learn</h2>

<ul>
<li>Clarifying questions are important. They shed light on ambiguity and help break the problem down into its component parts.</li>
<li>Find the problems within the problem. Breaking down the original problem into bite-sized chucks not only helps you solve the problem, but helps you relax. If you are focusing on one little problem and tabling everything else, it alleviates the stress of needing to solve everything at once.</li>
<li>I find this type of on-the-fly problem solving combined with normal interview pressure tough in the moment. Try to find comfort in knowing that the questions are designed to be tough. No one is immediately &ldquo;John Nashing&rdquo; the answer on the whiteboard. Furthermore, that&rsquo;s not even what the interviewer is looking for you to do. The interviewer is on your side. They are hoping you do well (so they can stop doing 5 interviews a day :) ). They just want to see how you work.</li>
</ul>


	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">18 Feb 2016</span>
		<h2 class="post-title">
			
			<a href="/blog/2016/02/18/hitting-twitters-api-rate-limit/">
			
				How to Debug Hitting API Rate Limits</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<h2>Step 1: <code>p</code> All Over the Code</h2>

<p>The ruby method <code>p</code> (<code>puts</code> works fine too. The only difference between the two is their return values. We don&rsquo;t care about return values in this case.) allows you to put strings to the console. We will use this as a tool to track the flow of our program by putting them in key places and describing where we are/what is happening in the code. Keep in mind that the purpose of these <code>p</code> statements is to read them later in the terminal to assess what code is being run and when. These will go everywhere: <code>p "&lt;&lt;where we are/what is happening in the code&gt;&gt;"</code></p>

<blockquote><h3><code>p</code> in the Controller</h3>

<p>Put <code>p "Controller#action line number"</code> <em>on each line</em> of the triggered <code>Controller#Action</code>.</p>

<p><img src="/images/twitter-api/controller.png" /></p></blockquote>

<hr />

<blockquote><h3><code>p</code> in the Model</h3>

<p>Put <code>p "Model#method_name"</code> at the top of each method in the model where the API is called.</p>

<p><img src="/images/twitter-api/model.png" /></p></blockquote>

<hr />

<blockquote><h3><code>p</code> in the Loops</h3>

<p>Loops are the primary suspect for too many API calls, so we&rsquo;ll want to pay special attention to them. <code>p "Model#method_name loop"</code></p>

<p><img src="/images/twitter-api/model-loop.png" /></p></blockquote>

<hr />

<blockquote><h3><code>p</code> in the Client Connection</h3>

<p>Last but not least, the most important place to monitor is the API calls themselves. I like to use <code>!</code>s, so the calls stand out in the terminal output.</p>

<ul>
<li>Put a <code>p "!!! initialize client"</code> where the connection is first established to the API client.</li>
<li>Put a <code>p "! Hit the API"</code> in the method you&rsquo;re using the make calls to the API. This is likely an <code>attr_accessor</code>, so this step will require you to explicitly write out this method as well.</li>
</ul>


<p><img src="/images/twitter-api/client.png" /></p></blockquote>

<h2>Step 2: Run the Code</h2>

<p>Start your server and go through the actions in the browser that will trigger your API calls.</p>

<h2>Step 3: Look at the Terminal Output</h2>

<p>Here&rsquo;s the moment of truth. Go to the terminal where your server is running. Immediately following the request, you should see all of the <code>p</code> strings being put to the console as each line is run.</p>

<p><video controls loop width="800" autoplay>
  <source src="/images/twitter-api/api-hell.mp4" type="video/mp4">
</video></p>

<h2>Step 4: Detective Work</h2>

<p>Let&rsquo;s do some detective work. If you placed <code>p</code> statements in the right places, this part should be relatively easy. Find the the place(s) where a bunch of API calls are being fired, and look at the lines just before it to see where to debug.</p>

<p>In this particular case, notice that <code>TwitterDirt#get_user_timeline loop</code> is where it hits the rate limit.</p>

<p><img src="/images/twitter-api/terminal-output.png" /></p>

<p>Let&rsquo;s take a closer look at that loop.</p>

<p><img src="/images/twitter-api/detective-work.png" /></p>

<p>The number of times we iterate is determined by the <code>TwitterDirt#number_of_pages</code> method. Let&rsquo;s put a binding in there and see what&rsquo;s happening.</p>

<p><img src="/images/twitter-api/pry.png" /></p>

<p>It looks like we found our problem (one of them, at least)! This particular user has 155 pages of tweets. We have to send a request to Twitter for each page of tweets we want to access. Twitter only allows <a href="https://dev.twitter.com/rest/public/rate-limiting">180 API calls every 15 minutes</a>. <strong>This one request uses ~90% of the allowed calls.</strong> There&rsquo;s nothing we can do about Twitter&rsquo;s decision to only allow 180 calls, so we have to limit the number of pages we search.</p>

<h2>Step 5: Solve It</h2>

<p>Luckily (I guess) for us. <a href="https://dev.twitter.com/rest/reference/get/statuses/user_timeline">Twitter only allows access to a user&rsquo;s 3200 most recent tweets</a>. This is true even if the user has 31,000 tweets (155 pages * 200 tweets per page) like in our current example.</p>

<p><code>3200 tweets/200 tweets per page = 16 pages</code></p>

<p>What this means is that 16 should be the max number of API calls to get a user&rsquo;s timeline. After the 16th call, Twitter stops sending back the intended response. Consequently, <code>TwitterDirt#number_of_pages</code> should return an integer no greater than 16.</p>

<p><img src="/images/twitter-api/number-of-pages.png" /></p>

<p><strong>This single line of code just saved us 139 API calls!</strong></p>

<iframe src="//giphy.com/embed/eoxomXXVL2S0E?hideSocial=true" width="480" height="360" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>


<p>Not so fast, cool guy. We&rsquo;ve taken a major step forward, but there&rsquo;s still more work to do. The application doesn&rsquo;t blow up. That&rsquo;s good news.</p>

<p>The bad <a href="news:">news:</a> Our test case is still make 38 API calls for just one user. At that rate, just four searches within 15 minutes will blow up the app.</p>

<h3>Double calls</h3>

<p>In the terminal out, our program hits <code>"!!! TwitterDirt#initialize_twitter_client"</code> three times. That&rsquo;s a red flag because <code>TwitterDirt#initialize_twitter_client</code> is only called when a new instance of <code>TwitterDirt</code> is created. We should only be dealing with one Twitter account i.e. one instance of <code>TwitterDirt</code>.</p>

<p>This gets into application design (I could do a whole other blog post on refactoring this app). Notice in the controller a new <code>User</code> instance is created. And all the <code>TwitterDirt</code> is called on that <code>@user</code>.</p>

<p><img src="/images/twitter-api/user-trouble.png" /></p>

<p>Let&rsquo;s take a look at the <code>User</code> model.</p>

<p><img src="/images/twitter-api/user-model-trouble.png" /></p>

<p>Aha! Three new instances. Bad. Bad. Bad. Let&rsquo;s refactor the controller to interact directly with one instance of <code>TwitterDirt</code>.</p>

<p><img src="/images/twitter-api/refactored-controller.png" /></p>

<p>That should do it. We&rsquo;ve gone from >180 API calls per request to 19.</p>

<h3><strong>19 API calls!</strong></h3>

<iframe src="//giphy.com/embed/xpoFzS3z0QujK?html5=true&hideSocial=true" width="480" height="264" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>


<p>This allows us 9 worst-case requests every 15 minutes. This is the best we can do without having a user sign in with twitter (or iterating through API keys. Shhh, don&rsquo;t tell Twitter.).</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">19 Dec 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/12/19/manipulating-server-response-using-rails-after-filters/">
			
				Manipulating Server Response Using Rails After Filters</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>I recently created a website for <a href="http://coreycambridge.com/">a musician friend</a>. As a music site, it naturally contained</p>

<p><a href="http://guides.rubyonrails.org/action_controller_overview.html#after-filters-and-around-filters">After Filters</a></p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options">X-Frame-Options</a></p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">06 Sep 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/09/06/were-programmers-dammit/">
			
				We&#8217;re Programmers, Dammit</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>This is a phrase I borrowed from <a href="http://hostiledeveloper.com/">programmer extraordinaire Steven Nunez</a>. I love this sentiment. I love the idea that we aren&rsquo;t limited to consuming the Internet. We can be an active participant.</p>

<p>In this edition of &ldquo;We&rsquo;re Programmers, Dammit&rdquo;, I&rsquo;ll walk through how I used a Chrome Extension to change the functionality of an unwanted feature of a website. I will walk through the basic steps for getting a Chrome Extension up and running. The project lives at <a href="https://github.com/joshuabamboo/fias">this Github repository</a>.</p>

<h4>1. Create a <code>manifest.json</code> file</h4>

<p>Inside a directory that will contain extension, create a <code>manifest.json</code>. This file is what Chrome will look for first. It supplies Chrome with all the metadata about the extension (e.g. <code>manifest_version</code>, <code>name</code>, <code>version</code>). These are the only things <em>required</em> to make a chrome extention, so let&rsquo;s do the basics and come back later.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;manifest_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;extenion_name&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;myExtensionVersion&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2. Connect your local directory to Chrome</h4>

<p>Now we have the following directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'>  <span class="err">extension_name/</span>
</span><span class='line'>  <span class="err">└──</span> <span class="err">manifest.json</span>
</span></code></pre></td></tr></table></div></figure>


<p>To get the directory into Chrome, we must first go to <code>chrome://extensions/</code> in your Chrome browser. Next, click the <code>Developer Mode</code> checkbox at the top right. It should look like this:
<img src="/images/chrome-ext.png" /></p>

<p>Next, locate the directory in your finder, and drag the entire folder into the browser opened to <code>chrome://extensions/</code>. Chrome allows you to drop the entire folder to load it into Chrome. It&rsquo;s as simple as that. You&rsquo;ll only have to do this step once. Any changes you make to the files will now be available in Chrome one you reload (<code>cmd + r</code>) the page. Click the <code>Enable</code> checkbox, and you&rsquo;ve got yourself a Chrome Extension.</p>

<p><img src="/images/chrome-drag.png" /></p>

<p>Protip: If you get an error at this phase, more than likely you have a syntax error. Check your json formatting (check your commas) and try again.</p>

<h4>3. Now make it do something</h4>

<p>Congrats! You officially have a Chrome Extension. The downside is, it doesn&rsquo;t do anything. Let&rsquo;s fix that. In my case, I wanted to remove a social feature on <a href="http://learn.co">Learn.co</a>. The site looks like this. I&rsquo;m feeling particularly antisocial today, so I want to get rid of everything in the red box.</p>

<p><img src="/images/chrome-ext-learn-before.png" /></p>

<p>Back to <code>manifest.json</code>. We&rsquo;ll need to add some <code>content_scripts</code> to the manifest.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;manifest_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;extenion_name&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;myExtensionVersion&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="s2">&quot;content_scripts&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;matches&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;https://learn.co/*&quot;</span><span class="p">],</span>
</span><span class='line'>        <span class="nt">&quot;css&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fias.css&quot;</span><span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>matches</code> refers to the URLs we want to the Chrome Extension to change. In our case, we want it to work on every URL that starts with <code>https://learn.co/</code>.</p>

<p><code>css</code> is where we link the css files in the directory. Go ahead and create the css file at the root of the directory.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'>  <span class="err">extension_name/</span>
</span><span class='line'>  <span class="err">└──</span> <span class="err">manifest.json</span>
</span><span class='line'>  <span class="err">└──</span> <span class="err">fias.css</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>fias.css</code> is where we will add the css to remove the elements on the page that we do not want to see. That is as simple as adding <code>display: none</code> to the id of the divs. In our case it looks like this:</p>

<pre><code class="`css">  #students-working-container {
    display: none;
  }
</code></pre>

<p><img src="/images/chrome-ext-learn-after.png" /></p>

<p>It&rsquo;s as simple as that. With a few lines of code we&rsquo;ve completely removed an unwanted feature because we&rsquo;re programmers, dammit!</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">23 Feb 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/02/23/hacking-rewards-gold-part-3/">
			
				Hacking RewardsGold.com: Part 3</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>One of the mantras of behavioral economics is &ldquo;make it simple.&rdquo; In the spirit of simplifying my series on revealing vulnerabilities at RewardsGold.com, I decided to throw together a web app. Running a script or even manipulating a form field in the Chrome console can be too complex. I wanted something I could send to my mom, and she would have no problem understanding and walking through the process.</p>

<p><a href="#">Protect your forms</a></p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">16 Feb 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/02/16/refactoring-tic-tac-toe/">
			
				Refactoring Tic Tac Toe</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>Oh, how far I&rsquo;ve come since I began this coding journey. So much of our journey as code newbies is focused on how much we still have to learn, but it&rsquo;s a good exercise to reflect on how far you&rsquo;ve come. For me, this came in the form of refactoring a game of tic tac toe.</p>

<p>As much as it makes me cringe, I&rsquo;m sharing my first ever attempt at coding something in Ruby:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Welcome to beginner Tic Tac Toe.</span><span class="se">\n</span><span class="s2">You are X. The computer is O. You go first.&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Enter the number of the box you would like to occupy:</span><span class="se">\n</span><span class="s2"> &quot;</span>
</span><span class='line'><span class="n">currentBoard</span> <span class="o">=</span> <span class="s2">&quot;1|2|3</span><span class="se">\n</span><span class="s2">4|5|6</span><span class="se">\n</span><span class="s2">7|8|9&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="n">currentBoard</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> &quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">remainingSpaces</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>  <span class="c1">#available positions to choose   </span>
</span><span class='line'><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># set to 0, so the default is outside remainingSpaces range</span>
</span><span class='line'><span class="n">locationsX</span> <span class="o">=</span> <span class="o">[]</span>  <span class="c1"># array of player&#39;s selected locations</span>
</span><span class='line'><span class="n">locationsO</span> <span class="o">=</span> <span class="o">[]</span>  <span class="c1"># array of computer&#39;s selected locations</span>
</span><span class='line'><span class="n">winningCombinations</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span><span class="p">,</span>
</span><span class='line'>  <span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="o">]]</span>  <span class="c1"># all possible winning sequences  </span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">until</span> <span class="n">remainingSpaces</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kp">nil</span> <span class="c1"># loop until we&#39;ve run out of tic tac toe spaces</span>
</span><span class='line'>  <span class="c1">#user makes a move</span>
</span><span class='line'>  <span class="n">location</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span><span class="o">.</span><span class="n">to_i</span>  <span class="c1"># user input converted to integer</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1"># is the input a valid choice from remainingSpaces</span>
</span><span class='line'>    <span class="n">currentBoard</span><span class="o">[</span><span class="n">location</span><span class="o">.</span><span class="n">to_s</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>  <span class="c1"># updating the board to show &#39;X&#39; instead of num</span>
</span><span class='line'>    <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1">#removes the chosen number from the array  </span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">currentBoard</span>
</span><span class='line'>    <span class="n">locationsX</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1"># adds selection to array containing all player X selections</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#check for winner</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">combination</span> <span class="k">in</span> <span class="n">winningCombinations</span> <span class="c1"># need to look at each array in the parent array</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">locationsX</span><span class="o">.</span><span class="n">sort</span> <span class="o">&amp;</span> <span class="n">combination</span> <span class="o">==</span> <span class="n">combination</span> <span class="c1">#does array of previous moves match winner</span>
</span><span class='line'>      <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;Tic Tac Toe! You win!&quot;</span><span class="p">)</span> <span class="c1"># if yes, game over</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">else</span> <span class="c1">#  in case the user selects any char != 1-9</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s1">&#39;Available positions are: &#39;</span>
</span><span class='line'>      <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>          <span class="nb">puts</span> <span class="n">i</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Select a number...&quot;</span>
</span><span class='line'>    <span class="k">redo</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>   <span class="c1">#computer makes a move </span>
</span><span class='line'>
</span><span class='line'>   <span class="c1">#for combination in winningCombinations</span>
</span><span class='line'>   <span class="c1">## Tie game locator</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">remainingSpaces</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kp">nil</span>  <span class="c1"># breaks loop on the last iteration to avoid unnecessary final turn for O</span>
</span><span class='line'>      <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;Cat game! Game over.&quot;</span><span class="p">)</span> <span class="c1"># if we made it here, it&#39;s a tie</span>
</span><span class='line'>   <span class="c1">## offensive move -&gt; if there&#39;s 2/3 combination, select the third</span>
</span><span class='line'>    <span class="c1">#elsif (combination &amp; locationsO).length == 2 #do both arrays have 2 locations in common?</span>
</span><span class='line'>    <span class="c1"># space = combination - locationsO # if yes, what&#39;s the the third space that&#39;s missing</span>
</span><span class='line'>    <span class="c1"># if remainingSpaces.include? space # has that space been selected already by player O?</span>
</span><span class='line'>    <span class="c1">#   location = space # if no, pick that space</span>
</span><span class='line'>    <span class="c1"># end </span>
</span><span class='line'>   <span class="c1">## defensive move -&gt; if opponent has 2/3 combination, select the third</span>
</span><span class='line'>    <span class="c1">#elsif (combination &amp; locationsX).length == 2 #same as offensive</span>
</span><span class='line'>    <span class="c1"># space = combination - locationsX # same as offensive</span>
</span><span class='line'>    <span class="c1"># if remainingSpaces.include? space # has that space been selected already by player X?</span>
</span><span class='line'>    <span class="c1">#   location = space # same as offensive</span>
</span><span class='line'>    <span class="c1"># end</span>
</span><span class='line'>   <span class="c1">## work-around</span>
</span><span class='line'>    <span class="k">elsif</span> <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">include?</span> <span class="mi">5</span>  <span class="c1"># included this as a rudimentary work-around to the commented code above</span>
</span><span class='line'>      <span class="n">location</span> <span class="o">=</span> <span class="mi">5</span>                  <span class="c1"># taking the middle square gives player O a better statistical chance of a tie</span>
</span><span class='line'>   <span class="c1">## pick a random location  </span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">location</span> <span class="o">=</span> <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">sample</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="n">currentBoard</span><span class="o">[</span><span class="n">location</span><span class="o">.</span><span class="n">to_s</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>  <span class="c1"># updating board to show &#39;O&#39; instead of the chosen number</span>
</span><span class='line'>    <span class="n">remainingSpaces</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>  <span class="c1">#removes the chosen number from the array</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The computer is making its move...&quot;</span>
</span><span class='line'>    <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># added delay for a more natural flow</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">currentBoard</span>
</span><span class='line'>    <span class="n">locationsO</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#check for winner</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">combination</span> <span class="k">in</span> <span class="n">winningCombinations</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">locationsO</span><span class="o">.</span><span class="n">sort</span> <span class="o">&amp;</span> <span class="n">combination</span> <span class="o">==</span> <span class="n">combination</span>
</span><span class='line'>      <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;Tic Tac Toe! The computer wins!&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The computer chose %d. Your turn...&quot;</span> <span class="o">%</span> <span class="n">location</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, compare this with <a href="https://github.com/joshuabamboo/tic-tac-toe-cli">my recently refactored version</a>. It&rsquo;s good to glance back at where you&rsquo;ve come from while moving full speed ahead.</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">30 Jan 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/01/30/hacking-rewardsgold-dot-com-part-2/">
			
				Hacking RewardsGold.com: Part 2</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p>If you haven&rsquo;t read part one, you can find it <a href="http://joshuabamboo.github.io/blog/2015/01/25/hacking-rewardsgold-dot-com/">here</a>. If you have, you&rsquo;ll recall that I wrote a script to submit the invite form for points on rewardsgold.com. This works perfectly fine; however, while tinkering with their form I discovered a flaw.</p>

<p>Beware of form data. This one line of code left Rewards Gold vulnerable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;points&quot;</span> <span class="na">value=</span><span class="s">&quot;500&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>They actually keep their point value as a hidden input in their form. By simply inspecting the element in Chrome, you can alter that &ldquo;500&rdquo; to any number you like. And just like that, when you submit the form your point count will increase by whatever number you choose. Pro tip: The Economist is 8600 points. :)</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">25 Jan 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/01/25/hacking-rewardsgold-dot-com/">
			
				Hacking RewardsGold.com: Part 1</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p><a href="http://www.rewardsgold.com/">Rewards Gold</a> is one of those sites where you earn points, and the points then act as currency for products in the Rewards Gold store. There are several ways to earn points, but the one that caught my attention was the &ldquo;Invite Friends&rdquo; option. Simple enough: 250 points for each friend you refer.</p>

<p>At this point I should mention that their store consists almost entirely of magazine and newspaper subscriptions. One of which caught my eye - The Economist. A year of The Economist can set you back anywhere from $350-$120 (i.e. well worth my time).</p>

<p>At a price of 8,600 points, The Economist would&rsquo;ve cost me 35 friends&#8217; names and emails. Not terrible, but I was looking for something scalable.</p>

<p>Naturally, I began writing a script. <a href="https://github.com/joshuabamboo/rewards-gold">Here it is on GitHub</a></p>

<p>I created a class called <code>FriendGenerator</code> where the user could pass in their Rewards Gold username, email, and number of points they needed. Using the Mechanize gem, the script logs the user in and then submits the &ldquo;Invite Friends&rdquo; form until the specified number of points are reach. It turns out the emails aren&rsquo;t vetted in any way. As you can see from the <code>submit_friend_form</code> method, all of the form data is randomly generated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">submit_friend_form</span>
</span><span class='line'>  <span class="n">page</span> <span class="o">=</span> <span class="vi">@mechanize</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://www.rewardsgold.com/surv/referfriend.php&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">form</span> <span class="o">=</span> <span class="vi">@mechanize</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">form_with</span><span class="p">(</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">&quot;theform&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">form</span><span class="o">.</span><span class="n">FriendName1</span> <span class="o">=</span> <span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span>
</span><span class='line'>  <span class="n">form</span><span class="o">.</span><span class="n">FriendEmail1</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span><span class="si">}</span><span class="s2">@</span><span class="si">#{</span><span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span><span class="si">}</span><span class="s2">.com&quot;</span>
</span><span class='line'>  <span class="n">form</span><span class="o">.</span><span class="n">FriendName2</span> <span class="o">=</span> <span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span>
</span><span class='line'>  <span class="n">form</span><span class="o">.</span><span class="n">FriendEmail2</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span><span class="si">}</span><span class="s2">@</span><span class="si">#{</span><span class="no">Random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span><span class="si">}</span><span class="s2">.com&quot;</span>
</span><span class='line'>  <span class="n">button</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">button_with</span><span class="p">(</span><span class="ss">:value</span> <span class="o">=&gt;</span> <span class="s2">&quot;Submit&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@mechanize</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">button</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This works. By simply creating a new instance of the class, passing in the arguments, and calling the <code>get_points</code> method, you can get all the points you want.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">f</span> <span class="o">=</span> <span class="no">FriendGenerator</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;youremail@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;PASSWORD&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">f</span><span class="o">.</span><span class="n">get_points</span>
</span></code></pre></td></tr></table></div></figure>


<p>Bam! Go get yourself The Economist. We could stop here, but there is an even simpler way I discovered. To be continued&hellip;</p>

	</section>

    </article>

  
    <article class="post">
      
	
	<header class="post-header">
		<span class="post-meta">20 Jan 2015</span>
		<h2 class="post-title">
			
			<a href="/blog/2015/01/20/flatiron-presents-timber/">
			
				Flatiron Students Present - Timber</a>
		</h2>
	</header>
	<section class="post-excerpt">
		<p><img src="../images/timber-home.png" width="650" alt="Timber homepage" /></p>

<p>Timber is an application my partner and I built and presented at Flatiron Students Present Meetup. We wanted to create a fun application that we&rsquo;d enjoy making and presenting. We wanted to dive pretty heavily into relational databases. And we wanted a good way to really get a grasp of Active Record. Behold, Timber was born.</p>

<h3>What is Timber?</h3>

<p>Timber is a web app clone of Tinder built in Rails. The twist being that it is specifically targeted at users that recently ended a relationship and were still living with their significant other. In essence, Timber is the Tinder for cohabitation breakups.</p>

<h3>How does it work?</h3>

<p>For our demo, we used two obvious test users, Pitbull and Ke$ha (<a href="http://open.spotify.com/track/3cHyrEgdyYRjgJKSOiOtcS">You know the song</a>).</p>

<p>Pitbull recently broke up with his girlfriend, and he was looking for a place to move. Ke$ha recently broke up with her boyfriend, and she was looking for someone to help defray the cost of her now much more expensive apartment.</p>

<p>From here, the UX resembles Tinder. Pitbull will see heterosexual females with apartments. Ke$ha will see heterosexual males looking for a place to stay. If they like each other, they will match and can send messages back and forth.</p>

<h3>The tech</h3>

<p>This project relies heavily on database interaction. In a way, our database queries were a little more complex than a Tinder-style checking for reciprical likes. Our models were more similar to an Airbnb model, in that each user could be a guest or a host. In order to filter the users properly, we check gender, orientation, and the sex they&rsquo;re looking for. Once we have our <code>@user</code> variable set, we then must check to see if the user is a guest or a host. We do all this with smaller helper methods such as <code>not_have_apts</code> vs <code>have_apts</code> and <code>women_seeking_men</code> vs <code>men_seeking_women</code>. The goal is that ultimately the methods start to read like conversational English.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">filtered_users</span>
</span><span class='line'>  <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">gender</span> <span class="o">==</span> <span class="s2">&quot;male&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s2">&quot;straight&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">self</span><span class="o">.</span><span class="n">looking_for</span> <span class="o">==</span> <span class="s2">&quot;women&quot;</span>
</span><span class='line'>    <span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">women_seeking_men</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="nb">self</span><span class="o">.</span><span class="n">gender</span> <span class="o">==</span> <span class="s2">&quot;female&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s2">&quot;straight&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">self</span><span class="o">.</span><span class="n">looking_for</span> <span class="o">==</span> <span class="s2">&quot;men&quot;</span>
</span><span class='line'>    <span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">men_seeking_women</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="vi">@users</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="nb">self</span><span class="o">.</span><span class="n">host?</span> <span class="p">?</span> <span class="vi">@users</span><span class="o">.</span><span class="n">not_have_apts</span> <span class="p">:</span> <span class="vi">@users</span><span class="o">.</span><span class="n">have_apts</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another important component of database interaction was making sure that users were only viewing users they hadn&rsquo;t seen before. To do this, we will go through the <code>Like</code> and <code>Dislike</code> tables to look for users where neither a like nor dislike is persisted.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">unviewed_users</span>
</span><span class='line'>  <span class="n">users</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">filtered_users</span>
</span><span class='line'>  <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">has_liked?</span>
</span><span class='line'>    <span class="no">Like</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">:liker_id</span> <span class="o">=&gt;</span> <span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">find_each</span> <span class="k">do</span> <span class="o">|</span><span class="n">like</span><span class="o">|</span>
</span><span class='line'>      <span class="n">users</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">where</span><span class="o">.</span><span class="n">not</span><span class="p">(</span><span class="ss">:id</span> <span class="o">=&gt;</span> <span class="n">like</span><span class="o">.</span><span class="n">likee_id</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">has_disliked?</span>
</span><span class='line'>    <span class="no">Dislike</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">:disliker_id</span> <span class="o">=&gt;</span> <span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">find_each</span> <span class="k">do</span> <span class="o">|</span><span class="n">dislike</span><span class="o">|</span>
</span><span class='line'>      <span class="n">users</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">where</span><span class="o">.</span><span class="n">not</span><span class="p">(</span><span class="ss">:id</span> <span class="o">=&gt;</span> <span class="n">dislike</span><span class="o">.</span><span class="n">dislikee_id</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">users</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lastly, it&rsquo;s worthwhile to take a look into the Message model to examine the query for displaying user messages. Here, we grab messages based on a <code>to_id</code> and <code>from_id</code>, grab the reciprocal messages, concatenate them, and sort by date and time.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Message</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">belongs_to</span> <span class="ss">:to</span><span class="p">,</span> <span class="ss">:class_name</span> <span class="o">=&gt;</span> <span class="ss">:user</span>
</span><span class='line'>  <span class="n">belongs_to</span> <span class="ss">:from</span><span class="p">,</span> <span class="ss">:class_name</span> <span class="o">=&gt;</span> <span class="ss">:user</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">messages</span><span class="p">(</span><span class="n">to_id</span><span class="p">,</span> <span class="n">from_id</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Message</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;to_id = ? AND from_id = ?&quot;</span><span class="p">,</span> <span class="n">to_id</span><span class="p">,</span> <span class="n">from_id</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">conversation_with</span><span class="p">(</span><span class="n">recipient_id</span><span class="p">)</span>
</span><span class='line'>    <span class="n">current_user_messages</span> <span class="o">=</span> <span class="no">Message</span><span class="o">.</span><span class="n">messages</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">recipient_id</span><span class="p">)</span>
</span><span class='line'>    <span class="n">recipient_messages</span> <span class="o">=</span> <span class="no">Message</span><span class="o">.</span><span class="n">messages</span><span class="p">(</span><span class="n">recipient_id</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span class='line'>    <span class="n">conversation</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_user_messages</span> <span class="o">+</span> <span class="n">recipient_messages</span><span class="p">)</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:created_at</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


	</section>

    </article>


<nav class="pagination" role="pagination">
  

  <span class="page-number">
    Page 1 of 3
  </span>

  
    <a class="older-posts"
        href="/2">
      Older Posts →
    </a>
  
</nav>


  </main>
  <footer class="site-footer"><a class="subscribe icon-feed" href="http:///atom.xml"><span class="tooltip">Subscribe!</span></a>


<div class="inner">


Follow me on



<a class="social twitter" href="http://twitter.com/joshuabamboo" title="Twitter">Twitter</a>



<a class="social github" href="http://github.com/joshuabamboo" title="GitHub">GitHub</a>




<section class="copyright">All content copyright <a href="/">Josh Owens</a> © 2017 • All rights reserved.</section>

<section class="poweredby">Casper theme by <a class="icon-ghost" href="http://tryghost.org">Ghost</a> &amp; Published with <a href="http://octopress.org">Octopress</a></section>

</div>
</footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>






</body>
</html>
